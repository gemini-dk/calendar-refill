# リフィルエディタ画面デザイン（UIレイアウト）

## 目的
`/refill/edit` におけるレイアウト仕様を共有し、実装時にスクロール挙動や固定領域を明確にする。すべての領域が「ウィンドウに対して固定」され、各領域内でのみスクロールが発生することを前提とする。

## 3分割レイアウト概要
- **ヘッダー**
  - 画面最上部に固定配置（height 固定、横幅は viewport full）。
  - 左にサービスロゴ／タイトル、右に保存・購入ボタン、進捗表示などを配置可能。
  - ページ全体をスクロールしてもヘッダーは常に表示され、ヘッダー内のみ横スクロールなし。
- **左メニュー（コントロールペイン）**
  - ヘッダー直下、画面左に固定配置。縦スクロール可能（`overflow-y: auto`）。
  - 幅は固定（例: 320px）。横スクロールは発生させない。
  - デザイン設定をセクション分けしてアコーディオンやタブで切り替え。
- **コンテンツ（プレビューエリア）**
  - ヘッダー直下、左メニューの右隣に固定配置。左右・上下スクロール可能（`overflow: auto`）。
  - ビューポート残余をすべて占有し、見開き 2 ページのデザインを拡大／縮小しながら表示する。
  - 拡大率変更（Zoom）、スナップ表示、ページ送りなどの UI を上部にフロートで配置しても良い。

```
┌─────────────────────────────────────────┐
│ ヘッダー（固定）                         │
├───────────────┬─────────────────────────┤
│ 左メニュー     │ コンテンツ（見開きプレビュー）│
│ （縦スクロール）│ （縦横スクロール）             │
├───────────────┴─────────────────────────┤
│ ※すべてウィンドウ基準で固定配置          │
└─────────────────────────────────────────┘
```

## 左メニューで選択できる内容
- **テンプレート**：ウィークリー、マンスリー（各パターンのサムネイルや切替ラジオ）。
- **サイズ**：バイブル、A6、A5（用紙サイズ切替。プレビューの比率更新）。
- **学事カレンダー選択**：大学名検索・絞り込み、最近使ったカレンダー一覧。
- **カスタマイズ**（任意拡張）：テーマカラー、フォント、罫線スタイル、余白設定、開始曜日、祝日表示 ON/OFF。
- **アクション**：プレビュー更新、初期化、保存、購入動線など（ヘッダーと重複しても可）。

## コンテンツ（プレビュー）要件
- **表示内容**：システム手帳の見開き 2 ページをキャンバス化し、テンプレート選択とカスタマイズを反映したデザインを表示。
- **スクロール**：コンテンツ領域自体が縦横スクロール可能。拡大率やページサイズが viewport を超える場合でも、ウィンドウ全体はスクロールしない。
- **インタラクション**：
  - ズームイン／アウト、実寸表示（100%）切替。
  - ページ送り（前後の週・月）、ガイド線表示切替。
  - カレンダーイベントのツールチップ表示。
- **状態表示**：ロード中インジケータ／エラー表示をプレビュー領域内にオーバーレイで出す。

## レスポンシブとアクセシビリティ
- **ブレークポイント**：幅 1024px 未満では左メニューを折りたたみ（ドロワー化）、開閉中もヘッダーとプレビューは固定を維持。
- **キーボード操作**：メニュー内フォーカス遷移、検索入力のアクセシブルラベル、ショートカット（例: `Ctrl+S` で保存）。
- **コントラスト**：ヘッダー／メニュー／コンテンツの背景とテキストコントラストを確保。

## 実装メモ（Next.js クライアント想定）
- CSS レイアウトは `header + main { display: grid; grid-template-columns: menu-width auto; }` を基軸にし、`main` の高さを `calc(100vh - header-height)` で確保。
- 固定配置を保ちつつコンテンツのみスクロールさせるため、`body` のスクロールを無効化し、`main` 配下の各領域で `overflow` を制御。
- プレビューのキャンバスサイズは用紙サイズを mm→px 変換して算出し、ズーム倍率と合わせて CSS 変換（`transform: scale()`）で表示。
